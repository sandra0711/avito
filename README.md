# Avito - собственная версия

## Изучение области компетенции

* Создайте макет, чтобы смоделировать представления(views) приложения
* Используйте Mongoose
* Выполните все четыре части [CRUD][]: создавать, читать, обновлять и удалять. 
* Используйте шаблон MVC

## Общие сведения

Мы создадим простую версию Avito. 


## Releases

### Release 0: Макет с вашей парой

Веб-макет - Проверьте [wireframe][wireframe]. Выясните, какие *страницы* нужны для вашего приложения, а затем набросайте основную *разметку* каждой страницы и *связи* между ними.

Возможно у вашего приложения будут две основные модели `Article` и `Category`. Либо одна будет вложена в другую - зависит от вас. Продумайте, как будет удобнее работать с данными. `Category` - это что-то вроде "Аренда квартиры" или "Автозапчасти"

Поработайте с вашей парой над тем, какие страницы вы собираетесь создать.
Как минимум, вам понадобятся:

1. Страница, в которой перечислены все категории
2. Страница, в которой перечислены все статьи данной категории
3. Страница, которая позволяет кому-то создать новую статью в данной категории
4. Страница, которая позволяет кому-то, кто создал страницу, вернуться к редактированию/обновлению страницы

Мы не будем использовать авторизацию пользователей. Вместо этого, когда кто-то создает статью, ему/ей будет предоставляться специальный «секретный» URL-адрес, который предоставляет ему/ей полномочия для редактирования такой статьи. URL-адрес редактирования статьи должен выглядеть примерно так:

```text
http://localhost:3000/articles/123/edit?key=klidp219
```

Ключ генерируется случайным образом. Пользователь получает свой "edit URL" (URL-адрес для правки) после того, как он/она успешно создали статью. Любой, у кого есть этот URL, может редактировать статью. 


### Release 1: Создайте структуру

Наша структура будет не такой простой как раньше. Нам понадобятся URL-адреса, которые выглядят как `/categories/123` и `/articles/456`. Мы будем использовать методы `get` и` post`.

Например, для создания новой `Article`, мы хотели бы отправить HTML-форму, используя http-метод POST, в URL `/articles`, например:

```html
<form action="/articles" method="post">
  <!-- other form elements here -->
</form>
```

и чтобы обновить существующую запись (например, с id `1234`), мы хотели бы отправить запрос по адресу `/articles/1234`.


Обработчики routes должны либо перенаправлять на другой URL-адрес, либо визуализировать страницу. Как правило, страница, загруженная через HTTP POST, перенаправит на соответствующий URL-адрес, если запрос выполнен успешно, в противном случае появляется страница ошибки.

#### Организация

Грамотная организация кода является важной частью любого программного проекта. Наиболее важно следовать условным обозначениям, таким образом, новому члену вашей команды не нужно будет тратить дни на то, чтобы понять детали решения.


Разработчики могут не прийти к согласию в отношении того, каким соглашениям (об организации структуры кода) нужно следовать, но все согласятся, что какое-либо из соглашений лучше, чем ни одного. 

Предположим, что в этом приложении у вас будут модели `Article` и `Category`. Будем описывать их в разных файлах:


```text
models
  | - article.js
  | - category.js
```

Почему бы не сделать то же самое для ваших routes? Каждый файл с routes будет обрабатывать все запросы (CRUD) для каждой из имеющихся моделей. Например.:


```text
routes
  | - article.js
  | - category.js
  | - index.js
```

Вы можете использовать `index.js` для запросов, которые не относятся к `Category` или к `Article`. Ваша корневая страница `/`, куда ведет ссылка, хорошо подходит для `index.js`

Такой же организационный метод может быть применен к вашим представлениям hbs. Вместо заполнения вашего каталога `views` полдюжиной шаблонов hbs:

```text
views
  | - category_index.hbs
  | - category_show.hbs
  | - edit_article.hbs
  | - new_article.hbs
  | - article_show.hbs
  | - articles_index.hbs
```

Почему бы не создать подкаталог `articles` и `categories`?

```
views
  | - articles
    | - edit.hbs
    | - new.hbs
    | - show.hbs
    | - index.hbs
  | - categories
    | - index.hbs
    | - show.hbs
```



### Запускайте!

Убедитесь, что основные функции работают. У нас должна быть возможность загрузить ваше приложение, запустить его и выполнить следующие действия:

1. Выбрать категорию для просмотра
2. Просмотреть все статьи в определенной категории
3. Просмотреть конкретную статью
4. Создать свою собственную статью
5. Редактировать свои статьи, используя «секретный ключ», который мы получим после создания своих статей 

### Release 3: Добавьте один заключительный компонент

Осталось добавить один заключительный компонент: что-нибудь очень классное! Что это значит? Это может означать что угодно. Новые нестандартные функции, крутой дизайн, оптимизация, встраивание дополнительных технологий.

Это не гонка; нет финишной прямой, только крайний срок (на завтра, кто бы сомневался!).
Потратьте время на то, чтобы сделать это приложение таким, чтобы вы могли им гордиться. Это не обязательно должно быть что-то очень впечетляющее - это может быть технически сложная задача, с которой вы справитесь.

Привнесите 100% вашего лучшего «я» в этот компонент. Создайте что-то значимое; сделайте что-то великое.


## Ресурсы

* Create, Read, Update, Delete ([CRUD][])
* Wireframe ([wireframe][])

[CRUD]: http://en.wikipedia.org/wiki/Create,_read,_update_and_delete
[wireframe]: http://en.wikipedia.org/wiki/Website_wireframe
